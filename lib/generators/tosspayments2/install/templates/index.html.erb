<h1>결제 내역</h1>

<div class="mb-3">
  <%%= link_to '새 결제', new_payment_path, class: 'btn btn-primary' %>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>주문번호</th>
      <th>금액</th>
      <th>상태</th>
      <th>거래ID</th>
      <th>생성일</th>
      <th>액션</th>
    </tr>
  </thead>
  <tbody>
    <%% if @payments.any? %>
      <%% @payments.each do |payment| %>
        <tr>
          <td><%%= payment.order_id %></td>
          <td><%%= payment.formatted_amount %></td>
          <td>
            <span class="badge <%%= payment_status_class(payment.status) %>">
              <%%= payment_status_text(payment.status) %>
            </span>
          </td>
          <td><%%= payment.transaction_id %></td>
          <td><%%= payment.created_at.strftime('%Y-%m-%d %H:%M') %></td>
          <td>
            <%%= link_to '상세', payment_path(payment), class: 'btn btn-sm btn-outline-primary' %>
            <%% if payment.confirmed? %>
              <%%= link_to '취소', cancel_payment_path(payment), method: :patch, 
                          confirm: '결제를 취소하시겠습니까?', 
                          class: 'btn btn-sm btn-outline-danger' %>
            <%% end %>
          </td>
        </tr>
      <%% end %>
    <%% else %>
      <tr>
        <td colspan="6" class="text-center">결제 내역이 없습니다.</td>
      </tr>
    <%% end %>
  </tbody>
</table>

